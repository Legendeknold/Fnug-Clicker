<!DOCTYPE html>
<html lang="da">
<head>
<meta charset="UTF-8">
<title>Klik-spil med Shop og Prestige</title>
<style>
body { font-family: Arial; background:#f0f0f0; text-align:center; }
#score { font-size:28px; margin:20px; }
#container { display:flex; justify-content:center; gap:40px; }
#klik-omr√•de img { width:300px; cursor:pointer; }
.shop { background:white; padding:15px; border-radius:10px; width:260px; }
.shop img { width:80px; }
button { margin-top:5px; padding:5px 10px; }
#dyr-display { margin-top:15px; display:flex; justify-content:center; gap:10px; }
#dyr-display img { width:60px; }
</style>
</head>
<body>

<div id="score">Score: 0</div>

<div id="container">
    <div id="klik-omr√•de">
        <img id="billede" src="billede_normal.jpg" alt="Klik">
    </div>

    <div class="shop">
        <h2>Shop</h2>
        <p>ü¶Å Pive L√∏ve (<span id="loevePris">100</span>)<br>Giver +8 pr. klik<br><button id="loeveBtn" onclick="koeb('loeve')">K√∏b</button></p>
        <p>ü¶í Pive Giraf (<span id="girafPris">1000</span>)<br>Giver +24 pr. klik<br><button id="girafBtn" onclick="koeb('giraf')">K√∏b</button></p>
        <p>üê± Pive Kat (<span id="katPris">10000</span>)<br>Giver +248 pr. klik<br><button id="katBtn" onclick="koeb('kat')">K√∏b</button></p>
        <p>ü¶õ Pive Flodhest (<span id="flodhestPris">100000</span>)<br>Giver +2048 pr. klik<br><button id="flodhestBtn" onclick="koeb('flodhest')">K√∏b</button></p>

        <h3>Prestige / Genstart</h3>
        <button onclick="prestige()">Genstart med Prestige</button>
        <button onclick="resetAlt()">Reset uden Prestige</button>
        <p>Permanent bonus: <span id="bonus">0%</span></p>

        <div id="dyr-display"></div>
    </div>
</div>

<audio id="klikLyd" src="klik.mp3"></audio>
<audio id="koebLyd" src="koeb.mp3"></audio>

<script>
let score = parseInt(localStorage.getItem("score")) || 0;
let prestigeProcent = parseFloat(localStorage.getItem("prestigeProcent")) || 0;
let timeoutId = null;

// Dyr: antal k√∏bte
let koebt = JSON.parse(localStorage.getItem("koebt")) || { loeve:0, giraf:0, kat:0, flodhest:0 };

// Priser
let priser = JSON.parse(localStorage.getItem("priser")) || { loeve:100, giraf:1000, kat:10000, flodhest:100000 };

// Dyr point pr klik
const dyrPoint = { loeve:8, giraf:24, kat:248, flodhest:2048 };

const billede = document.getElementById("billede");
const scoreText = document.getElementById("score");
const klikLyd = document.getElementById("klikLyd");
const koebLyd = document.getElementById("koebLyd");
const dyrDisplay = document.getElementById("dyr-display");

const loevePrisSpan = document.getElementById("loevePris");
const girafPrisSpan = document.getElementById("girafPris");
const katPrisSpan = document.getElementById("katPris");
const flodhestPrisSpan = document.getElementById("flodhestPris");
const bonusSpan = document.getElementById("bonus");

const dyrBilleder = { loeve:"loeve.jpg", giraf:"giraf.jpg", kat:"kat.jpg", flodhest:"flodhest.jpg" };

function opdaterScore() {
    scoreText.textContent = "Score: " + score;
    bonusSpan.textContent = prestigeProcent.toFixed(4) + "%";
    localStorage.setItem("score", score);
    localStorage.setItem("prestigeProcent", prestigeProcent);
    localStorage.setItem("koebt", JSON.stringify(koebt));
    localStorage.setItem("priser", JSON.stringify(priser));
}

function opdaterDyr() {
    dyrDisplay.innerHTML = "";
    for (let dyr in koebt) {
        if (koebt[dyr] > 0) {
            let img = document.createElement("img");
            img.src = dyrBilleder[dyr];
            img.alt = dyr;
            dyrDisplay.appendChild(img);
        }
    }
}

function opdaterPrisDisplay() {
    loevePrisSpan.textContent = priser.loeve;
    girafPrisSpan.textContent = priser.giraf;
    katPrisSpan.textContent = priser.kat;
    flodhestPrisSpan.textContent = priser.flodhest;
}

// Klik funktion
billede.addEventListener("click", () => {
    let total = 1; // base point
    for (let dyr in koebt) {
        total += koebt[dyr] * dyrPoint[dyr];
    }
    // prestige bonus som fast procent
    total += total * (prestigeProcent / 100);
    score += Math.floor(total);

    opdaterScore();
    klikLyd.currentTime = 0;
    klikLyd.play();

    billede.src = "billede_klik.jpg";
    if (timeoutId) clearTimeout(timeoutId);
    timeoutId = setTimeout(()=>{ billede.src = "billede_normal.jpg"; },1000);
});

// K√∏b funktion
function koeb(dyr){
    if(score<priser[dyr]) { alert("Ikke nok score!"); return; }
    score -= priser[dyr];
    koebt[dyr] += 1;
    priser[dyr] *= 10; // pris ganget med 10 efter hvert k√∏b
    opdaterScore();
    opdaterDyr();
    opdaterPrisDisplay();
    koebLyd.currentTime = 0;
    koebLyd.play();
}

// Prestige / Genstart
function prestige(){
    let millioner = Math.floor(score / 10000000);
    if(millioner>0){
        prestigeProcent += millioner * 0.001;
    }
    score = 0;
    koebt = { loeve:0, giraf:0, kat:0, flodhest:0 };
    priser = { loeve:100, giraf:1000, kat:10000, flodhest:100000 };
    opdaterScore();
    opdaterDyr();
    opdaterPrisDisplay();
    alert("Alt nulstillet! Permanent prestige bonus: " + prestigeProcent.toFixed(4) + "%");
}

// Reset uden prestige ‚Äì nulstil ALT inkl. bonus
function resetAlt(){
    score = 0;
    koebt = { loeve:0, giraf:0, kat:0, flodhest:0 };
    priser = { loeve:100, giraf:1000, kat:10000, flodhest:100000 };
    prestigeProcent = 0;
    localStorage.clear();
    opdaterScore();
    opdaterDyr();
    opdaterPrisDisplay();
    alert("Alt nulstillet! Ingen bonus tilbage.");
}

// Initial opdatering
opdaterScore();
opdaterDyr();
opdaterPrisDisplay();
</script>

</body>
</html>
